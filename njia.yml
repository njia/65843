---
- hosts: localhost
  connection: local

  tasks:

  - name: Setup Vim config files
    file: src=~/src/65843/{{item.SRC}} dest={{item.DEST}} state=link
    with_items:
      - {SRC: gitconfig,   DEST: ~/.gitconfig}
      - {SRC: ansible.cfg, DEST: ~/.ansible.cfg}
      - {SRC: vimrc,       DEST: ~/.vimrc}
      - {SRC: autoload,    DEST: ~/.vim/autoload}
      - {SRC: vimrc,       DEST: ~/.config/nvim/init.vim}
      - {SRC: autoload,    DEST: ~/.config/nvim/autoload}

  - name: Link plugged directory to newvim
    file: src=~/.vim/plugged dest=~/.config/nvim/plugged state=link

  - name: Insall software for Arch Linux
    pacman: name={{item}} state=latest
    when: ansible_distribution == "Archlinux"
    become: true
    with_items:
      - dstat
      - git
      - lshw
      - neovim
      - pkgfile
      - ruby
      - the_silver_searcher
      - tree
      - vim
